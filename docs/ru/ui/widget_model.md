[Главная](../main.md)

[Структура UI](structure.md)

# WidgetModel

Данная сущность представляет собой ViewModel из MVVM. 
В этой сущности описывается логика работы конкретного экрана.
Также можно провести аналогию с BLoC, но только в плане механизма взаимодействия.

Работа с View (Widget) производится через поток. WM ничего не знает про
конкретный виджет, который ее использует.

Основные компоненты WidgetModel — `Event'ы`:
 - Action — потоковое представление действия, например, клик на кнопку или изменение фокуса.
 - StreamedState — потоковое представление того или иного свойства, например, счетчик товаров или состояние enable у кнопки.
 - EntityStreamedState - наследник StreamedState, который дополнительно имеет состояния загрузки и ошибки.
 - дополнительная логика, которая связывает Action и State.

WM является промежуточным звеном между Model (в любом ее варианте) и Widget.

Зависимости из Model поставляются в WM также через конструктор.
В наших проектах для обеспечения DI используется [Injector](../../../packages/injector/lib/src/injector.dart).
Зависимости для WidgetModel конфигурируются в компоненте экрана.
Для этого используется объект [WidgetModelDependencies](../../../packages/mwwm/lib/src/dependencies/wm_dependencies.dart). Он содержит ErrorHandler — объект, отвечающий за обработку ошибок для реактивных потоков.
Без конфигурации WidgetModelDependencies обработка ошибок не будут работать в WidgetModel.